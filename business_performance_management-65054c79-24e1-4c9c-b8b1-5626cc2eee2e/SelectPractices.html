<!DOCTYPE html>
<html>
<head>
    <title>Select Practices</title>
    <style>
        body {
            font-family: Arial, sans-serif;
        }
        .container {
            margin: 50px auto;
            width: 300px;
            text-align: center;
        }
        select, button {
            padding: 10px;
            margin-top: 20px;
            width: 100%;
            border-radius: 4px;
            border: 1px solid #ddd;
            box-shadow: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <h2>Select Practice</h2>
        <select id="practiceSelect"></select>
        <button onclick="selectPractice()">Continue</button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const requestKey = sessionStorage.getItem('request_key');

            fetch('https://api.sikkasoft.com/v4/practices', {
                headers: {
                    'Content-Type': 'application/json',
                    'Request-Key': requestKey
                }
            })
            .then(response => response.json())
            .then(data => {
                const practiceSelect = document.getElementById('practiceSelect');
                data.items.forEach(item => {
                    const option = document.createElement('option');
                    option.value = item.practice_id;
                    option.text = item.name || 'Unnamed Practice';
                    practiceSelect.appendChild(option);
                });
            })
            .catch(error => console.error('Error:', error));
        });

        function selectPractice() {
            const practiceId = document.getElementById('practiceSelect').value;
            sessionStorage.setItem('selected_practice', practiceId);
            window.location.href = 'Dashboard.html';
        }
    </script>
</body>
</html>